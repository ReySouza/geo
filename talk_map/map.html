<!DOCTYPE html>
<html>
<head>
  <title>Mapa de Trabalhos de Campo</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <style>
    #map {
      height: 500px;
      width: 100%;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <script>
    var map = L.map('map').setView([-14.2350, -51.9253], 5);

    var streetMap = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}', {
      attribution: 'Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012'
    });

    var satelliteMap = L.tileLayer('https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}', {
      attribution: 'Tiles &copy; Google',
      maxZoom: 20
    });

    var markers = [
      {
        lat: -14.2350,
        lng: -51.9253,
        title: "GE606 Marker 1",
        date: "Random Date",
        description: "Random Description",
        image: "https://via.placeholder.com/150",
      },
      {
        lat: -15.2350,
        lng: -50.9253,
        title: "GE606 Marker 2",
        date: "Random Date",
        description: "Random Description",
        image: "https://via.placeholder.com/150",
      },
      {
        lat: -13.2350,
        lng: -52.9253,
        title: "GE606 Marker 3",
        date: "Random Date",
        description: "Random Description",
        image: "https://via.placeholder.com/150",
      },
      {
        lat: -16.2350,
        lng: -53.9253,
        title: "GE606 Marker 4",
        date: "Random Date",
        description: "Random Description",
        image: "https://via.placeholder.com/150",
      },
      {
        lat: -14.5,
        lng: -52.5,
        title: "GN304 Marker 1",
        date: "Random Date",
        description: "Random Description",
        image: "https://via.placeholder.com/150",
      },
      {
        lat: -15,
        lng: -52,
        title: "GN304 Marker 2",
        date: "Random Date",
        description: "Random Description",
        image: "https://via.placeholder.com/150",
      },
      {
        lat: -14,
        lng: -53,
        title: "GN304 Marker 3",
        date: "Random Date",
        description: "Random Description",
        image: "https://via.placeholder.com/150",
      },
      {
        lat: -15.5,
        lng: -53.5,
        title: "GN304 Marker 4",
        date: "Random Date",
        description: "Random Description",
        image: "https://via.placeholder.com/150",
      },
    ];

    var redIcon = L.icon({
      iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
      iconSize: [25, 41],
      iconAnchor: [12, 41],
      popupAnchor: [1, -34],
    });

    var blueIcon = L.icon({
      iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',
      iconSize: [25, 41],
      iconAnchor: [12, 41],
      popupAnchor: [1, -34],
    });

    var markerLayerGroupGE606 = L.layerGroup();
    var markerLayerGroupGN304 = L.layerGroup();

    function addMarkersByColor(markers, layerGroup, color) {
      markers.forEach(function(marker) {
        var icon;
        if (marker.title.includes("GE606")) {
          icon = redIcon;
        } else if (marker.title.includes("GN304")) {
          icon = blueIcon;
        }
        if (marker.title.includes(color)) {
          L.marker([marker.lat, marker.lng], { icon: icon }).addTo(layerGroup)
            .bindPopup("<h3>" + marker.title + "</h3><p>" + marker.date + "</p><p>" + marker.description + "</p><img src='" + marker.image + "' alt='Marker Image' width='200px'>");
        }
      });
    }

    addMarkersByColor(markers, markerLayerGroupGE606, 'GE606');
    addMarkersByColor(markers, markerLayerGroupGN304, 'GN304');

    var baseMaps = {
      "Street Map": streetMap,
      "Satellite Map": satelliteMap
    };

    var overlayMaps = {
      "<span style='color: red;'>GE606</span>": markerLayerGroupGE606,
      "<span style='color: blue;'>GN304</span>": markerLayerGroupGN304,
    };

    L.control.layers(baseMaps, overlayMaps).addTo(map);
    streetMap.addTo(map);

    document.querySelectorAll('.leaflet-control-layers-selector').forEach(function(checkbox) {
      checkbox.addEventListener('change', function() {
        var layerName = this.nextElementSibling.innerHTML;
        if (this.checked) {
          map.addLayer(overlayMaps[layerName]);
        } else {
          map.removeLayer(overlayMaps[layerName]);
        }
      });
    });

  </script>
</body>
</html>
