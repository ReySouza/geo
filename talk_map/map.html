<!DOCTYPE html>
<html>
<head>
  <title>Mapa de Trabalhos de Campo</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <style>
    #map {
      height: 500px;
      width: 100%;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <script>
    var map = L.map('map').setView([-14.2350, -51.9253], 5);

    var streetMap = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}', {
      attribution: 'Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012'
    });

    var satelliteMap = L.tileLayer('https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}', {
      attribution: 'Tiles &copy; Google',
      maxZoom: 20
    });

    var markers = [
      // Marker data
    ];

    var redIcon = L.icon({
      iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
      iconSize: [25, 41],
      iconAnchor: [12, 41],
      popupAnchor: [1, -34],
    });

    var blueIcon = L.icon({
      iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',
      iconSize: [25, 41],
      iconAnchor: [12, 41],
      popupAnchor: [1, -34],
    });

    var greenIcon = L.icon({
      iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-green.png',
      iconSize: [25, 41],
      iconAnchor: [12, 41],
      popupAnchor: [1, -34],
    });

    var violetIcon = L.icon({
      iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-violet.png',
      iconSize: [25, 41],
      iconAnchor: [12, 41],
      popupAnchor: [1, -34],
    });

    var yellowIcon = L.icon({
      iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-yellow.png',
      iconSize: [25, 41],
      iconAnchor: [12, 41],
      popupAnchor: [1, -34],
    });

    var markerLayerGroup = L.layerGroup();

    // Function to add markers to the map based on color category
    function addMarkersByColor(color) {
      markers.forEach(function(marker) {
        var icon;
        if (marker.title.includes("GE606")) {
          icon = redIcon;
        } else if (marker.title.includes("GN304")) {
          icon = blueIcon;
        } else if (marker.title.includes("GF508")) {
          icon = greenIcon;
        } else if (marker.title.includes("GF303")) {
          icon = yellowIcon;
        } else {
          icon = violetIcon; 
        }

        if (marker.title.includes(color)) {
          L.marker([marker.lat, marker.lng], { icon: icon }).addTo(markerLayerGroup)
            .bindPopup("<h3>" + marker.title + "</h3><p>" + marker.date + "</p><p>" + marker.description + "</p><img src='" + marker.image + "' alt='Marker Image' width='200px'>");
        }
      });
    }

    // Function to clear all markers from the map
    function clearMarkers() {
      markerLayerGroup.clearLayers();
    }

    // Add markers to the map initially
    addMarkersByColor('GE606');
    addMarkersByColor('GN304');
    addMarkersByColor('GF508');
    addMarkersByColor('GF303');
    addMarkersByColor('Other');

    var baseMaps = {
      "Street Map": streetMap,
      "Satellite Map": satelliteMap
    };

    var overlayMaps = {
      "<span style='color: red;'>GE606</span>": markerLayerGroup,
      "<span style='color: blue;'>GN304</span>": markerLayerGroup,
      "<span style='color: green;'>GF508</span>": markerLayerGroup,
      "<span style='color: yellow;'>GF303</span>": markerLayerGroup,
      "<span style='color: violet;'>Other</span>": markerLayerGroup,
    };

    L.control.layers(baseMaps, overlayMaps).addTo(map);
    streetMap.addTo(map);

  </script>
</body>
</html>
