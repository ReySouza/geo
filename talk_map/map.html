<!DOCTYPE html>
<html>
<head>
  <title>Mapa de Trabalhos de Campo</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
  <style>
    #map {
      height: 500px;
      width: 100%;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <script>
    var map = L.map('map').setView([-14.2350, -51.9253], 5);

    var streetMap = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}', {
      attribution: 'Tiles &copy; Esri &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012'
    });

    var satelliteMap = L.tileLayer('https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}', {
      attribution: 'Tiles &copy; Google',
      maxZoom: 20
    });

    var markers = [
      {
        lat: -22.906760272046675,
        lng: -47.02271238435057,
        title: "GE606 - Parque Ecológico de Campinas",
        date: "13/10/2022",
        description: "Uma série de afloramentos de matacões arredondados, alguns in situ e outros transportados de demais porções da vertente, todos dispersos pela extensão do parque.",
        image: "https://raw.githubusercontent.com/ReySouza/geo/master/talk_map/FieldGallery/gnaisse.jpg",
      },
      {
        lat: -21.62050936091047,
        lng: -46.88699425467799,
        title: "GE606 - Corte de Estrada em São José do rio Pardo-SP",
        date: "13/10/2022",
        description: "Afloramento é constituído de diversas rochas falhadas e planos de fratura que caracterizam uma zona de deformação rúptil.",
        image: "https://github.com/ReySouza/geo/blob/master/talk_map/FieldGallery/granulite.jpg?raw=true",
      },
      {
        lat: -21.498113946910053,
        lng: -46.75774084962243,
        title: "GE606 - Pedreira Abandonada em Tapiratiba-SP",
        date: "13/10/2022",
        description: "Contém rochas meta carbonáticas encaixadas no formato de lentes entre granulitos charnockitos, essas rochas são intimamente ligadas com formações metassedimentares como rochas calcissilicáticas e produtos de metassomatismo como skarnitos que também afloram no ponto.",
        image: "https://raw.githubusercontent.com/ReySouza/geo/master/talk_map/FieldGallery/marble.jpg",
      },
      {
        lat: -21.08659536372455,
        lng: -46.58700540556198,
        title: "GE606 - Corte de Estrada em São Pedro da União-MG",
        date: "14/10/2022",
        description: "O afloramento é constituído de rochas cortadas, falhadas e com vários planos de fratura inclinados. Típico de afloramento de corte de estrada em que foram feitas obras de geotecnia, algumas estruturas têm falhas que foram induzidas durante a abertura da estrada, locais onde foram feitas sondagens para dinamitar a rocha.",
        image: "https://raw.githubusercontent.com/ReySouza/geo/master/talk_map/FieldGallery/amphibole.jpg",
      },
      {
        lat: -20.64680280782967,
        lng: -46.26601891493593,
        title: "GE606 - Parque Mirante dos Cânions",
        date: "14/10/2022",
        description: "Parque é constituído por um complexo de cânions e mirantes que oferecem vista privilegiada para cachoeiras e piscinas naturais, além de taludes bem altos de quartzito micáceo",
        image: "https://raw.githubusercontent.com/ReySouza/geo/master/talk_map/FieldGallery/capitolio.jpg",
      },
      {
        lat: -20.567199073092524,
        lng: -46.40781164243349,
        title: "GE606 - Parque Nacional da Serra da Canastra",
        date: "14/10/2022",
        description: "Os principais corpos vistos nos pontos são Quartzitos da unidade de Metarenitos, eles eram relativamente puros, possuíam poucos contaminantes, podemos deduzir que sua mineralogia se resumia a Quartzo, Plagioclásios, provavelmente sendo representados pela Albita e K-Feldspatos que provavelmente poderiam ter sido representados pelo Microclínio, no momento do metamorfismo durante o ciclo Brasiliano, eles formaram quartzitos de baixo grau metamórfico. ",
        image: "https://raw.githubusercontent.com/ReySouza/geo/master/talk_map/FieldGallery/quartz.jpg",
      },
      {
        lat: -20.916924464273137,
        lng: -46.063566348689385,
        title: "GE606 - Corte de Estrada na Ponte Torta",
        date: "14/10/2022",
        description: "Rocha pertencem ao grupo das meta-ultrabásicas pela pouca quantidade relativa de sílica e também ao grupo das metaultramáficas devido à grande porcentagem de minerais ferromagnesianos.",
        image: "https://raw.githubusercontent.com/ReySouza/geo/master/talk_map/FieldGallery/olivine.jpg",
      },
      {
        lat: -21.413240704730395,
        lng: -45.47583510341946,
        title: "GE606 - Pedreira do Xuxa",
        date: "15/10/2022",
        description: "As rochas observadas constituem um paredão de aproximadamente 20 m de altura e 50 m de largura, que à distância tem um aspecto textural bandado de faixas claras e escuras intercaladas. Com um diagnóstico mais preciso, verificamos que o afloramento é um granulito residual, em que resultou de um metamorfismo de dois protólitos diferentes, um félsico e outro máfico.",
        image: "https://raw.githubusercontent.com/ReySouza/geo/master/talk_map/FieldGallery/kyanite.jpg",
      },
      {
        lat: -22.18897522869696,
        lng: -46.076692862125576,
        title: "GE606 - Manganês Congonhal",
        date: "16/10/2022",
        description: "acessamos a lavra de minério da empresa Manganês Congonhal Ltda. Localizada a cerca de 9 km de distância do centro da cidade de Congonhal-MG. Atualmente, um grupo empresarial chinês é dono do empreendimento, que extrai e beneficia o manganês contido nas rochas do local",
        image: "https://raw.githubusercontent.com/ReySouza/geo/master/talk_map/FieldGallery/manganese.jpg",
      },
    ];

    var redIcon = L.icon({
      iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-red.png',
      iconSize: [25, 41],
      iconAnchor: [12, 41],
      popupAnchor: [1, -34],
    });

    var blueIcon = L.icon({
      iconUrl: 'https://cdn.rawgit.com/pointhi/leaflet-color-markers/master/img/marker-icon-2x-blue.png',
      iconSize: [25, 41],
      iconAnchor: [12, 41],
      popupAnchor: [1, -34],
    });

    var markerLayerGroupGE606 = L.layerGroup();
    var markerLayerGroupGN304 = L.layerGroup();

    function addMarkersByColor(markers, layerGroup, color) {
      markers.forEach(function(marker) {
        var icon;
        if (marker.title.includes("GE606")) {
          icon = redIcon;
        } else if (marker.title.includes("GN304")) {
          icon = blueIcon;
        }
        if (marker.title.includes(color)) {
          L.marker([marker.lat, marker.lng], { icon: icon }).addTo(layerGroup)
            .bindPopup("<h3>" + marker.title + "</h3><p>" + marker.date + "</p><p>" + marker.description + "</p><img src='" + marker.image + "' alt='Marker Image' width='200px'>");
        }
      });
    }

    addMarkersByColor(markers, markerLayerGroupGE606, 'GE606');
    addMarkersByColor(markers, markerLayerGroupGN304, 'GN304');

    var baseMaps = {
      "Street Map": streetMap,
      "Satellite Map": satelliteMap
    };

    var overlayMaps = {
      "<span style='color: red;'>GE606</span>": markerLayerGroupGE606,
      "<span style='color: blue;'>GN304</span>": markerLayerGroupGN304,
    };

    L.control.layers(baseMaps, overlayMaps).addTo(map);
    streetMap.addTo(map);

    document.querySelectorAll('.leaflet-control-layers-selector').forEach(function(checkbox) {
      checkbox.addEventListener('change', function() {
        var layerName = this.nextElementSibling.innerHTML;
        if (this.checked) {
          map.addLayer(overlayMaps[layerName]);
        } else {
          map.removeLayer(overlayMaps[layerName]);
        }
      });
    });

  </script>
</body>
</html>
